schemaVersion: "2.0.0"

fileExistenceTests:
  - name: 'terraform'
    path: '/bin/terraform'
    shouldExist: true
    permissions: '-rwxr-xr-x'
  - name: 'aws-cli'
    path: '/usr/bin/aws'
    shouldExist: true
    permissions: '-rwxr-xr-x'

commandTests:
  - name: "terraform version"
    command: "terraform"
    args: ["--version"]
    expectedOutput: ["Terraform v0.13.3"]
  - name: "python version"
    command: "python3"
    args: ["--version"]
    expectedOutput: ["Python 3.*"]
  - name: "aws-cli version"
    command: "sh"
    args:
      - -c
      - |
        aws --version
    expectedOutput: ["aws-cli/1.18.169"]

metadataTest:
  workdir: "/viya4-iac-aws"
  entrypoint: ["/bin/terraform"]
